<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wallet Test</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
<script src="https://unpkg.com/@walletconnect/ethereum-provider@2.11.0/dist/index.umd.js"></script>

<style>
body{
background:#000;
color:#fff;
font-family:Arial;
text-align:center;
padding-top:80px;
}
button{
padding:16px 30px;
font-size:18px;
background:gold;
border:none;
border-radius:10px;
}
</style>
</head>

<body>

<h2>DimeX Wallet Test</h2>

<button onclick="connect()">CONNECT WALLET</button>

<div id="status"></div>
<div id="wallet"></div>

<script>

let provider, signer;

async function connect(){

try{

document.getElementById("status").innerHTML="Connecting...";

let providerInstance=null;

/* injected */
if(window.ethereum){
providerInstance = new ethers.providers.Web3Provider(window.ethereum,"any");
await window.ethereum.request({method:"eth_requestAccounts"});
}

/* walletconnect */
if(!providerInstance){

const wc = await window.EthereumProvider.init({
projectId:"30cfec2651a089d32f1a5b62b3aa8c81",
chains:[56],
showQrModal:true,
metadata:{
name:"DimeX",
url:window.location.origin,
icons:["https://i.ibb.co/zVB8fHMD/logo.png"]
}
});

await wc.enable();
providerInstance = new ethers.providers.Web3Provider(wc,"any");
}

provider=providerInstance;
signer=provider.getSigner();

const net=await provider.getNetwork();

if(net.chainId!==56){
alert("Switch to BNB Chain");
return;
}

let addr=await signer.getAddress();

document.getElementById("wallet").innerHTML=addr;
document.getElementById("status").innerHTML="Connected";

}catch(e){
console.log(e);
alert("FAILED");
}

}

</script>

</body>
</html>
